<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>彼岸島タスク管理</title>

    <!-- Google Fontsの読み込み (Outfit, Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;700&display=swap"
        rel="stylesheet">

    <link rel="icon" type="image/png" href="image/favicon.png">

    <!-- スタイルシートの読み込み -->
    <link rel="stylesheet" href="style.css?v=20251214-blue">
    <link rel="stylesheet" href="focus-mode.css?v=20251214-1">

</head>

<body>
    <div id="app">
        <!-- ヘッダーエリア：タイトルと日付 -->
        <header>
            <div class="header-content">
                <h1>彼岸島タスク管理</h1>
                <button id="theme-toggle" class="theme-btn" aria-label="テーマ切り替え">🌙</button>
            </div>
            <div class="header-status-bar">
                <p id="date-display"></p>
                <div class="work-time-display">
                    <span>活動時間: <span id="work-time-value">0</span>分</span>
                    <button id="manual-break-btn" title="休憩をとる">☕</button>
                    <button id="reset-work-time-btn" title="活動時間をリセット">🔄</button>
                </div>
            </div>
        </header>

        <main>
            <!-- 入力エリア：グラスモーフィズムデザイン適用 -->
            <div class="input-group glass-card">
                <div class="input-wrapper">
                    <input type="text" id="todo-input" placeholder="新しいタスクを追加..." autocomplete="off">

                    <div class="input-options-row">
                        <div class="priority-input-container">
                            <select id="todo-priority" aria-label="優先度">
                                <option value="none">優先度: なし</option>
                                <option value="high">High 🔥</option>
                                <option value="medium">Medium ⚠️</option>
                                <option value="low">Low ☕</option>
                            </select>
                            <div class="quick-priority-buttons">
                                <button type="button" class="quick-priority-btn" data-priority="high">High</button>
                                <button type="button" class="quick-priority-btn" data-priority="medium">Mid</button>
                                <button type="button" class="quick-priority-btn" data-priority="low">Low</button>
                                <button type="button" class="quick-priority-btn" data-priority="none">なし</button>
                            </div>
                        </div>

                        <div class="date-input-container">
                            <input type="datetime-local" id="todo-date" aria-label="リマインド日時">
                            <div class="quick-date-buttons">
                                <button type="button" class="quick-date-btn" data-date="today">今日</button>
                                <button type="button" class="quick-date-btn" data-date="tomorrow">明日</button>
                                <button type="button" class="quick-date-btn" data-date="next-week">来週</button>
                                <button type="button" class="quick-date-btn" data-date="none">なし</button>
                            </div>
                        </div>

                        <div class="repeat-input-container">
                            <select id="todo-repeat" aria-label="繰り返し設定">
                                <option value="none">繰り返し: なし</option>
                                <option value="daily">毎日</option>
                                <option value="weekly">毎週</option>
                                <option value="monthly">毎月</option>
                                <option value="yearly">毎年</option>
                            </select>
                            <div class="quick-repeat-buttons">
                                <button type="button" class="quick-repeat-btn" data-repeat="daily">毎日</button>
                                <button type="button" class="quick-repeat-btn" data-repeat="weekly">毎週</button>
                                <button type="button" class="quick-repeat-btn" data-repeat="monthly">毎月</button>
                                <button type="button" class="quick-repeat-btn" data-repeat="none">なし</button>
                            </div>
                        </div>

                        <button id="reset-btn" aria-label="入力をリセット" title="入力をリセット">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                                    stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button id="add-btn" aria-label="タスクを追加">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>


            <!-- フィルタリング & 検索エリア -->
            <div class="filter-section glass-card">
                <input type="text" id="search-input" placeholder="タスクを検索..." autocomplete="off">
                <div class="filter-groups">
                    <div class="filter-group">
                        <label>Status:</label>
                        <div class="filter-buttons" id="filter-status">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="active">Active</button>
                            <button class="filter-btn" data-filter="completed">Done</button>
                        </div>
                    </div>
                    <div class="filter-group">
                        <label>Priority:</label>
                        <div class="filter-buttons" id="filter-priority">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="high">High</button>
                            <button class="filter-btn" data-filter="medium">Mid</button>
                            <button class="filter-btn" data-filter="low">Low</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TODOリスト表示エリア -->
            <div class="todo-list-container glass-card">
                <ul id="todo-list">
                    <!-- ここにJavaScriptでリストアイテム(li)が動的に追加されます -->
                </ul>
                <!-- タスクが0件の時の表示 -->
                <div id="empty-state" class="hidden">
                    <p>タスクはありません 🎉</p>
                </div>
            </div>

            <!-- フッターコントロールエリア -->
            <div class="controls glass-card">
                <!-- 未完了件数表示 -->
                <span><span id="active-count">0</span> 件の未完了タスク</span>
                <div class="control-buttons">
                    <button id="sort-priority-btn" class="text-btn">優先度順</button>
                    <button id="sort-date-btn" class="text-btn">日付順</button>
                    <!-- CSV操作 -->
                    <button id="export-csv-btn" class="text-btn">Export</button>
                    <button id="import-csv-btn" class="text-btn">Import</button>
                    <input type="file" id="csv-file-input" accept=".csv" style="display: none;">
                    <!-- 完了済み一括削除ボタン -->
                    <button id="clear-completed-btn" class="text-btn">完了済みを削除</button>
                </div>
            </div>
        </main>
    </div>

    <div id="miyabi-overlay" class="hidden">
        <img src="image/miyabi.png" alt="Miyabi">
    </div>

    <div id="akira-overlay" class="hidden">
        <img src="image/akira.png" alt="Akira">
    </div>

    <!-- タスク完了時の演出オーバーレイ -->
    <div id="task-complete-overlay" class="hidden">
        <img id="task-complete-image" src="" alt="Task Complete!">
    </div>

    <!-- 集中モードオーバーレイ -->
    <div id="focus-overlay">
        <div class="focus-exit-hint">ESC または Space で集中モードを終了</div>
    </div>

    <!-- メインロジックの読み込み -->
    <script src="app.js?v=20251214-2" defer></script>
</body>

</html>